(this.webpackJsonpaquinelli=this.webpackJsonpaquinelli||[]).push([[0],{175:function(e,t,c){},176:function(e,t,c){},184:function(e,t,c){},189:function(e,t,c){"use strict";c.r(t);var r=c(0),n=c.n(r),a=c(62),i=c.n(a),j=(c(175),c(145)),s=c(146),o=c(156),l=c(153),d=(c(176),c(208)),b=c(215),u=c(212),O=c(88),x=c(117),h=c.p+"static/media/logo.5850cf88.png",p=c(154),m=c(3);var f=function(){return Object(m.jsx)("a",{href:"#",children:Object(m.jsx)(p.a,{src:h,width:"50px",height:"30px"})})},g=c(155),v=c(32),C=c(22),S=Object(r.createContext)({}),A=function(){return Object(r.useContext)(S)},I=function(e){var t=Object(r.useState)([]),c=Object(C.a)(t,2),n=c[0],a=c[1],i=Object(r.useState)(0),j=Object(C.a)(i,2),s=j[0],o=j[1],l=Object(r.useState)(!0),d=Object(C.a)(l,2),b=d[0],u=d[1];return Object(r.useEffect)((function(){var e=localStorage.getItem("cart");e?a(JSON.parse(e)):localStorage.setItem("cart",JSON.stringify([])),u(!1)}),[]),Object(r.useEffect)((function(){localStorage.setItem("cart",JSON.stringify(n));var e=n.reduce((function(e,t){return e+t.quantity}),0);o(e)}),[n]),Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(S.Provider,{value:{cart:n,setCart:a,clearCart:function(){return a([])},addToCart:function(e,t){if(r=e.id,n.some((function(e){return e.id===r}))){var c=n.map((function(c){return c.id===e.id?Object(v.a)(Object(v.a)({},c),{},{quantity:c.quantity+t}):c}));a(c)}else a((function(c){return[].concat(Object(g.a)(c),[Object(v.a)(Object(v.a)({},e),{},{quantity:t})])}));var r},realStock:function(e){var t=n.find((function(t){return t.id===e.id}));return t?e.stock-t.quantity:e.stock},providerLoading:b,productsInCart:s,removeItem:function(e){return a(n.filter((function(t){return t.id!==e})))}},children:e.children})})},y=c(21);var k=function(){var e=A().cart;return Object(m.jsxs)(d.a,{children:[Object(m.jsxs)(d.a.Item,{children:[Object(m.jsx)(y.b,{to:"/",children:Object(m.jsxs)(b.a,{as:"h4",color:"red",children:["Aquinelli",Object(m.jsx)(b.a.Subheader,{children:"E-commerce"})]})}),Object(m.jsx)(y.b,{to:"/",children:Object(m.jsx)(f,{})})]}),Object(m.jsx)(d.a.Item,{children:Object(m.jsx)(y.b,{to:"/",children:Object(m.jsxs)(u.a,{animated:!0,children:[Object(m.jsx)(u.a.Content,{visible:!0,children:"Inicio"}),Object(m.jsx)(u.a.Content,{hidden:!0,children:Object(m.jsx)(O.a,{name:"home"})})]})})}),Object(m.jsx)(d.a.Item,{children:Object(m.jsx)(y.b,{to:"/store",children:Object(m.jsxs)(u.a,{animated:!0,children:[Object(m.jsx)(u.a.Content,{visible:!0,children:"Tienda"}),Object(m.jsx)(u.a.Content,{hidden:!0,children:Object(m.jsx)(O.a,{name:"list layout"})})]})})}),Object(m.jsx)(d.a.Item,{children:Object(m.jsx)(y.b,{to:"/about",children:Object(m.jsxs)(u.a,{animated:!0,children:[Object(m.jsx)(u.a.Content,{visible:!0,children:"Acerca de"}),Object(m.jsx)(u.a.Content,{hidden:!0,children:Object(m.jsx)(O.a,{name:"exclamation circle"})})]})})}),Object(m.jsx)(d.a.Item,{position:"right",children:Object(m.jsx)(y.b,{to:"/cart",children:Object(m.jsxs)(u.a,{as:"div",labelPosition:"right",children:[Object(m.jsxs)(u.a,{color:"green",children:[Object(m.jsx)(O.a,{name:"shopping cart"}),"Carrito"]}),Object(m.jsx)(x.a,{as:"a",basic:!0,color:"green",pointing:"left",children:e.reduce((function(e,t){return e+t.quantity}),0)})]})})})]})},E=c(205);var q=function(e){return Object(m.jsxs)(E.a,{fluid:!0,textAlign:"center",children:[Object(m.jsx)(b.a,{as:"h2",textAlign:"center",color:"red",children:"Bienvenidos al ecommerce"}),Object(m.jsx)(b.a.Subheader,{children:"Para dirigirse a la tienda hacer click en Tienda"}),Object(m.jsx)("br",{})]})},N=c(210),P=c(206);var w=function(e){var t=e.stock,c=e.paramOnAdd,n=Object(r.useState)(0),a=Object(C.a)(n,2),i=a[0],j=a[1],s=t;return Object(m.jsxs)(N.a.Content,{extra:!0,children:[Object(m.jsx)("div",{className:"ui two buttons",children:Object(m.jsxs)(u.a.Group,{widths:"10",children:[Object(m.jsx)(P.a,{content:"Agregar producto",trigger:Object(m.jsx)(u.a,{compact:!0,onClick:function(){i<s&&(j(i+1),s-=1)},children:Object(m.jsx)(O.a,{name:"plus"})})}),Object(m.jsx)(u.a.Or,{text:i}),Object(m.jsx)(P.a,{content:"Quitar producto",trigger:Object(m.jsx)(u.a,{compact:!0,onClick:function(){i>0&&(j(i-1),s+=1)},children:Object(m.jsx)(O.a,{name:"minus"})})})]})}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsxs)(u.a,{compact:!0,color:"green",onClick:function(){c(i),j(0)},children:["Agregar al carrito",Object(m.jsx)(O.a,{name:"shopping cart"})]})]})},D=(c(184),function(e){var t=e.item,c=A().addToCart;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(N.a,{children:[Object(m.jsxs)(y.b,{to:"/detail/".concat(t.id),children:[Object(m.jsx)(p.a,{src:t.pictureUrl,wrapped:!0,ui:!1}),Object(m.jsxs)(N.a.Content,{children:[Object(m.jsx)(N.a.Header,{children:t.name}),Object(m.jsxs)(N.a.Description,{children:["$",t.unitPrice]})]})]}),Object(m.jsx)(w,{stock:t.stock,paramOnAdd:function(e){return c(t,e)}})]},t.id)})});var F=function(e){return Object(m.jsx)(N.a.Group,{children:e.items.map((function(e,t){return Object(m.jsx)(D,{item:e},t)}))})},M=c(150),T=(c(190),M.a.initializeApp({apiKey:"AIzaSyDKGyV45Tj93O-jbWeX_7tpo6V_ClkT73Y",authDomain:"fir-16910-e-commerce.firebaseapp.com",projectId:"fir-16910-e-commerce",storageBucket:"fir-16910-e-commerce.appspot.com",messagingSenderId:"133215821446",appId:"1:133215821446:web:78a5638eea591ee34ffb07"}).firestore());var L=function(e){var t=Object(r.useState)([]),c=Object(C.a)(t,2),n=c[0],a=c[1],i=Object(r.useState)(null),j=Object(C.a)(i,2),s=j[0],o=j[1],l=Object(r.useState)(!1),d=Object(C.a)(l,2),u=d[0],O=d[1],x=[];return Object(r.useEffect)((function(){setTimeout((function(){T.collection("products").onSnapshot((function(e){e.forEach((function(e){x.push(Object(v.a)({id:e.id},e.data()))})),null!=x?(O(!0),a(x)):(O(!0),o("Error al cargar productos")),a(x)}))}),2e3)}),[]),s?Object(m.jsxs)(E.a,{fluid:!0,textAlign:"center",children:[Object(m.jsx)(b.a,{as:"h2",textAlign:"center",color:"red",children:"Error"}),Object(m.jsxs)(b.a.Subheader,{children:["Se produjo un error al cargar los productos: ",s,Object(m.jsx)("br",{}),"Lo estaremos solucionando. Lamentamos esto."]})]}):u?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("br",{}),Object(m.jsxs)(E.a,{fluid:!0,textAlign:"center",children:[Object(m.jsx)(b.a,{as:"h2",textAlign:"center",color:"red",children:e.title}),Object(m.jsx)(b.a.Subheader,{children:e.greeting}),Object(m.jsx)("br",{}),Object(m.jsx)(F,{items:n})]})]}):Object(m.jsxs)(E.a,{fluid:!0,textAlign:"center",children:[Object(m.jsx)(b.a,{as:"h2",textAlign:"center",color:"red",children:e.title}),Object(m.jsxs)(b.a.Subheader,{children:[e.greeting,Object(m.jsx)("br",{}),Object(m.jsx)(b.a,{as:"h3",textAlign:"center",color:"grey",children:"Cargando, por favor espere..."})]})]})},Y=c(12),H=c(216);var V=function(e){var t=e.product;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(H.a,{children:[Object(m.jsx)(H.a.Column,{width:4,children:Object(m.jsxs)(N.a,{children:[Object(m.jsx)(p.a,{src:t.pictureUrl,wrapped:!0,ui:!1}),Object(m.jsxs)(N.a.Content,{children:[Object(m.jsx)(N.a.Header,{children:t.name}),Object(m.jsx)(N.a.Meta,{children:Object(m.jsxs)("span",{className:"date",children:["Precio: $",t.unitPrice]})}),Object(m.jsx)(N.a.Meta,{children:Object(m.jsxs)("span",{className:"date",children:["Stock: ",t.stock]})})]})]})}),Object(m.jsx)(H.a.Column,{width:12,children:Object(m.jsxs)(N.a.Content,{children:[Object(m.jsx)(E.a,{textAlign:"center",children:t.description}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsxs)(E.a,{children:[Object(m.jsx)(u.a,{children:"Agregar al carrito"}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)(y.b,{to:"/store",children:Object(m.jsxs)(u.a,{compact:!0,children:[Object(m.jsx)(O.a,{name:"angle left"}),"Volver"]})})]})]})})]})})};var R=function(e){var t=e.match.params.id,c=Object(r.useState)([]),n=Object(C.a)(c,2),a=n[0],i=n[1],j=Object(r.useState)(null),s=Object(C.a)(j,2),o=s[0],l=s[1],d=Object(r.useState)(!1),u=Object(C.a)(d,2),O=u[0],x=u[1],h=[];Object(r.useEffect)((function(){setTimeout((function(){T.collection("products").onSnapshot((function(e){e.forEach((function(e){h.push(Object(v.a)({id:e.id},e.data()))})),null!=h?(x(!0),i(h)):(x(!0),l("Error al cargar productos")),i(h)}))}),2e3)}),[]);var p=a.filter((function(e){return e.id===t}));return o?Object(m.jsxs)(E.a,{fluid:!0,textAlign:"center",children:[Object(m.jsx)(b.a,{as:"h2",textAlign:"center",color:"red",children:"Error"}),Object(m.jsxs)(b.a.Subheader,{children:["Se produjo un error al cargar los detalles del producto: ",o,Object(m.jsx)("br",{}),"Lo estaremos solucionando. Lamentamos esto."]})]}):O?Object(m.jsx)(m.Fragment,{children:p.map((function(e){return Object(m.jsx)(E.a,{fluid:!0,textAlign:"center",children:Object(m.jsx)(V,{product:e})})}))}):Object(m.jsx)(E.a,{fluid:!0,textAlign:"center",children:Object(m.jsx)(b.a.Subheader,{children:Object(m.jsx)(b.a,{as:"h3",textAlign:"center",color:"grey",children:"Cargando, por favor espere..."})})})},z=c(209),J=c(213);var B=function(){var e=A(),t=e.cart,c=e.clearCart,r=e.removeItem;return t.length?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(z.a,{basic:"very",celled:!0,collapsing:!0,children:[Object(m.jsx)(z.a.Header,{children:Object(m.jsxs)(z.a.Row,{children:[Object(m.jsx)(z.a.HeaderCell,{children:"Producto"}),Object(m.jsx)(z.a.HeaderCell,{children:"Cantidad"}),Object(m.jsx)(z.a.HeaderCell,{children:"Precio x Unidad"}),Object(m.jsx)(z.a.HeaderCell,{})]})}),Object(m.jsx)(z.a.Body,{children:t.map((function(e){return Object(m.jsxs)(z.a.Row,{children:[Object(m.jsx)(z.a.Cell,{children:Object(m.jsxs)(b.a,{as:"h4",image:!0,children:[Object(m.jsx)(p.a,{src:e.pictureUrl,rounded:!0,size:"medium"}),Object(m.jsx)(b.a.Content,{children:e.name})]})}),Object(m.jsx)(z.a.Cell,{children:e.quantity}),Object(m.jsxs)(z.a.Cell,{children:["$",e.unitPrice]}),Object(m.jsx)(z.a.Cell,{children:Object(m.jsx)(u.a,{onClick:function(){return r(e.id)},children:Object(m.jsx)(O.a,{name:"trash alternate"})})})]})}))})]}),Object(m.jsxs)(J.a.Group,{size:"mini",floated:"right",children:[Object(m.jsxs)(J.a,{children:[Object(m.jsx)(J.a.Label,{children:"Total"}),Object(m.jsxs)(J.a.Value,{children:["$",t.reduce((function(e,t){return e+t.quantity*t.unitPrice}),0).toFixed(2)]})]}),Object(m.jsx)(y.b,{to:"/Checkout",children:Object(m.jsxs)(u.a,{color:"green",children:[Object(m.jsx)(O.a,{name:"checkmark"}),"Procesar Compra"]})}),Object(m.jsx)(y.b,{to:"/store",children:Object(m.jsxs)(u.a,{children:[Object(m.jsx)(O.a,{name:"angle left"}),"Volver a la tienda"]})}),Object(m.jsx)(u.a,{onClick:c,children:"Vaciar carrito"})]})]}):Object(m.jsx)(Y.a,{to:"/store"})},G=c(136),U=c.n(G),$=c(151),K=c(113),_=c(207),Q=c(211),W=function(e){var t=A(),c=t.cart,n=t.clearCart,a={NYA:"",EMAIL:"",DIRECCION:""},i=Object(r.useState)(a),j=Object(C.a)(i,2),s=j[0],o=j[1],l=function(e){var t=e.target,c=t.name,r=t.value;o(Object(v.a)(Object(v.a)({},s),{},Object(K.a)({},c,r)))};return c.length?Object(m.jsxs)(_.a,{onSubmit:function(t){!1===t.currentTarget.checkValidity()&&(t.preventDefault(),t.stopPropagation()),t.preventDefault(),""!==s.NYA&&""!==s.EMAIL&&""!==s.DIRECCION&&(e.addProduct(s),o(Object(v.a)({},a)),n())},children:[Object(m.jsxs)(_.a.Field,{required:!0,children:[Object(m.jsx)("label",{children:"Nombre y Apellido"}),Object(m.jsx)("input",{placeholder:"Ingrese su nombre y apellido completo",onChange:l,value:s.NYA,name:"NYA"})]}),Object(m.jsxs)(_.a.Field,{required:!0,children:[Object(m.jsx)("label",{children:"Email"}),Object(m.jsx)("input",{placeholder:"Ingrese su correo",onChange:l,value:s.EMAIL,name:"EMAIL"})]}),Object(m.jsxs)(_.a.Field,{required:!0,children:[Object(m.jsx)("label",{children:"Direccion"}),Object(m.jsx)("input",{placeholder:"Ingrese su direccion",onChange:l,value:s.DIRECCION,name:"DIRECCION"})]}),Object(m.jsx)(u.a,{type:"submit",children:"Terminar Compra"})]}):Object(m.jsxs)("div",{children:[Object(m.jsxs)(Q.a,{positive:!0,children:[Object(m.jsx)(Q.a.Header,{children:"Su compra se realizo con exito!"}),Object(m.jsxs)("p",{children:["Muy pronto nos estaremos comunicando con usted por medio de su ",Object(m.jsx)("b",{children:"email"})," para arreglar el metodo de envio."]}),Object(m.jsx)("p",{children:"Muchas gracias!"}),Object(m.jsxs)("p",{children:["Su Orden de compra es: ",Object(m.jsx)("b",{children:e.codigo})]})]}),Object(m.jsx)(y.b,{to:"/store",children:Object(m.jsxs)(u.a,{children:[Object(m.jsx)(O.a,{name:"angle left"}),"Volver a la tienda"]})})]})},X=c(152),Z=c.n(X),ee=function(e){var t=A().cart,c=Object(r.useState)(""),n=Object(C.a)(c,2),a=n[0],i=n[1],j=function(){var e=Object($.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(e){t.map((function(e){var t={};T.collection("products").doc(e.id).get().then((function(c){c.exists&&((t=c.data()).stock=t.stock-e.quantity,T.collection("products").doc(e.id).set(t))}))}));var c={products:{cart:t},user:{objeto:e},date:Z()().format("DD-MM-YYYY hh:mm:ss"),total:o};T.collection("orders").add(c).then((function(e){var t=e.id;return i(t)}))},o=t.reduce((function(e,t){return e+t.quantity*t.unitPrice}),0).toFixed(2);return Object(m.jsx)("div",{children:Object(m.jsx)(W,{addProduct:j,codigo:a})})},te=function(e){Object(o.a)(c,e);var t=Object(l.a)(c);function c(){return Object(j.a)(this,c),t.apply(this,arguments)}return Object(s.a)(c,[{key:"render",value:function(){return Object(m.jsx)(I,{children:Object(m.jsxs)(y.a,{children:[Object(m.jsx)(k,{}),Object(m.jsx)(E.a,{textAlign:"justified",children:Object(m.jsxs)(Y.d,{children:[Object(m.jsx)(Y.b,{path:"/",exact:!0,component:q}),Object(m.jsx)(Y.b,{path:"/store",exact:!0,component:L}),Object(m.jsx)(Y.b,{path:"/store/:categoryId",exact:!0,component:L}),Object(m.jsx)(Y.b,{path:"/detail/:id",exact:!0,component:R}),Object(m.jsx)(Y.b,{path:"/cart",exact:!0,component:B}),Object(m.jsx)(Y.b,{path:"/Checkout",exact:!0,component:ee})]})})]})})}}]),c}(n.a.Component);c(188);i.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(te,{})}),document.getElementById("root"))}},[[189,1,2]]]);
//# sourceMappingURL=main.ade10eac.chunk.js.map